<script>
  let elements;

  function showToast(body, className) {
    const { toast } = elements;
    toast.querySelector('.toast-body').innerText = body;
    const textBgClass = [...toast.classList].find(c => c.startsWith('text-bg'))
    toast.classList.remove(textBgClass)
    toast.classList.add(className)
    new bootstrap.Toast(toast).show();
  }

  window.onload = () => {
    MicroModal.init();

    elements = {
      loading: document.querySelector('.loading'),
      toast: document.querySelector('.toast'),
      customer: {
        selected: null,
        searchResults: [],
        modalSelect: document.querySelector('#modal-customer-select tbody'),
        modalDelete: document.querySelector('#modal-customer-delete-content'),
        submit: document.getElementById('customer_submit'),
        form: document.querySelector('#customer_form')
      },
      document: {
        checkboxes: null,
        submit: document.getElementById('document_submit')
      }
    };

    loadCustomerForm();
    loadDocuments();
    addModalDeleteEventHandler();
    addModalSelectEventHandler();
    addButtonClearEventHandler();
    addButtonDeleteEventHandler();
    addButtonSearchEventHandler();
    addButtonSubmitEventHandler();
  }
</script>